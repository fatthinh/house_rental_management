"use strict";

(function () {
  // Toggle class on click
  const navToggle = $("#nav-toggle");
  if (navToggle) {
    navToggle.addEventListener("click", function (t) {
      t.preventDefault();
      $("#db-wrapper").classList.toggle("toggled");
    });
  }

  // Initialize Bootstrap tooltips
  const tooltips = $$('[data-bs-toggle="tooltip"]');
  if (tooltips.length) {
    Array.prototype.slice.call(tooltips).forEach(function (t) {
      new bootstrap.Tooltip(t);
    });
  }

  // Initialize Bootstrap popovers
  const popovers = $$('[data-bs-toggle="popover"]');
  if (popovers.length) {
    Array.prototype.slice.call(popovers).forEach(function (t) {
      new bootstrap.Popover(t);
    });
  }

  // Refresh Bootstrap ScrollSpy instances
  const scrollSpies = $$('[data-bs-spy="scroll"]');
  if (scrollSpies.length) {
    Array.prototype.slice.call(scrollSpies).forEach(function (t) {
      bootstrap.ScrollSpy.getInstance(t).refresh();
    });
  }

  // Initialize Bootstrap toasts
  const toasts = $$(".toast");
  if (toasts.length) {
    Array.prototype.slice.call(toasts).forEach(function (t) {
      new bootstrap.Toast(t);
    });
  }

  // Initialize ApexCharts
  const perfomanceChart = $("#perfomanceChart");
  if (perfomanceChart) {
    new ApexCharts(perfomanceChart, {
      series: [100, 78, 89],
      chart: { height: 320, type: "radialBar" },
      colors: ["#28a745", "#ffc107", "#dc3545"],
      stroke: { lineCap: "round" },
      plotOptions: {
        radialBar: {
          startAngle: -168,
          endAngle: -450,
          hollow: { size: "55%" },
          track: { background: "transaprent" },
          dataLabels: { show: !1 },
        },
      },
    }).render();
  }

  // Initialize Bootstrap offcanvas elements
  const offcanvasElements = $$(".offcanvas");
  if (offcanvasElements.length) {
    Array.prototype.slice.call(offcanvasElements).forEach(function (t) {
      new bootstrap.Offcanvas(t);
    });
  }
})();

// (function () {
//   const t = window.location.toString();
//   const e = t.replace(
//     window.location.protocol + "//" + window.location.host + "/",
//     ""
//   );

//   const sidebarLinks = $$("ul#sidebarnav a");
//   sidebarLinks.forEach(function (link) {
//     if (link.href === t || link.href === e) {
//       let parent = link.closest(".sidebar-nav");
//       while (parent) {
//         if (parent.tagName === "LI" && parent.querySelector("a")) {
//           parent.querySelector("a").classList.add("active");
//           parent.classList.add("active");
//         } else if (parent.tagName === "UL") {
//           parent.classList.add("in");
//         } else {
//           parent.classList.add("active");
//         }
//         parent = parent.parentElement.closest(".sidebar-nav");
//       }
//     }
//   });
// })();

feather.replace();
